<h1>Requirements parser {{ beatcz }}</h1>
<p style="background:{{ color }}">Parses data required (based on the moustache-defined variables) from the any passed string.</p>
<div {{ isHidden }}>Show me your thing</div>

<!--<script src="../src/requirementsParser.js"></script>-->
<script type="text/javascript">
	var delimiters = ["\{\{", "\}\}"], //template-defined variable delimiters
		name = "[a-zA-Z_$][a-zA-Z0-9_$]*",
		variable = delimiters[0] + "\\s*(" + name + ")\\s*" + delimiters[1],
		variableRe = new RegExp( variable ); //used to detect variables needed
		//tokenRe = new RegExp( "(\s*" + name + "\s*)" ) //TODO: detect target of variable

	//returns object, representing data-values required for the template
	function detectDataRequired(str){
		//TODO: form matched variables array
		var i = 0;
		while ((match = variableRe.exec(str)) && i++ < 10) {
			//parse each match, forming object nesting
			console.log(match);

			//each next part forms new level of nesting
			//for (var level = 0; level < parts.length; level++){

			//}

			str = str.slice(match.index, match.index + match[0].length);
		}
	}

	//returns array of DOM-nodes to bind values to
	function detectTargetsToBind(html){
		var bindings = [];
	}


	//updates targets passed with data passed
	function targetsFromData(targets, data){
		for (var i = 0; i < targets.length; i++){
			var target = targets[i];

		}
	}

	//updates data object passed based on targets values
	function dataFromTargets(targets, data){
		for (var i = 0; i < targets.length; i++){
			var target = targets[i];

		}
	}




	//try detection
	console.log(detectDataRequired(document.body.innerHTML))
</script>